@{
    ViewData["Title"] = "Profile Page";
    int? userId = Context.Session.GetInt32("UserId");
}

@model List<Wave.Models.Post>

<link rel="stylesheet" href="~/css/test.css">

<main>
    <div class="main__profile">
        <div id="profilePic">
            <!--Foto de perfil del usuario con el id asignado a la session-->
            <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png" alt="">
        </div>
        <br>
        <div class="spaceName">
            <!--Nombre del usuario con el id asignado a la session-->
            <h3>@userId</h3>
        </div>
        <br>
        <div class="btnZone">
            <div class="btnEdit">
                <span class="material-icons-sharp">
                    edit
                </span>
                <h3>Edit</h3>
            </div>
        </div>
        <br>
        <div id="postZone">
            <ul>
                @if (Model != null)
                {
                    foreach (var post in Model)
                    {
                        if (post.UserId == userId)
                        {
                            <li class="post-item">
                                <img src="data:image/jpeg;base64, @Convert.ToBase64String(post.Content)" alt="Imagen" />
                            </li>
                        }                            
                    }
                }
                else
                {
                    <p>No hay datos para mostrar.</p>
                }
            </ul>
        </div>
    </div>

    <!-- Add Post -->
    <div id="add-post-popup" class="popup">
        <div class="popup-content">
            <span class="close" id="close-popup">&times;</span>
            <!-- Formulario -->
            <div class="form-container">
                <h2>Agregar Post</h2>
                <form id="post-form">
                    <div class="file-drop-area" id="fileDropArea">
                        <label for="post-image">Arrastra y suelta la imagen aquí o </label>
                        <span class="file-msg">Selecciona un archivo</span>
                        <input type="file" id="post-image" accept="image/*" required>
                    </div>

                    <label for="post-title">Título:</label>
                    <input type="text" id="post-title" required>

                    <label for="post-description">Descripción:</label>
                    <textarea id="post-description" required></textarea>

                    <button type="submit">Agregar Post</button>
                </form>
            </div>

            <!-- Previsualización de la imagen -->
            <div class="image-preview-container">
                <div id="image-preview"></div>
            </div>
        </div>
    </div>
    <!-- Contenedor del popup Post -->
    <div id="post_popupContainer" class="post_popup">
        <div class="post_popup-content">
            <span class="post_popup-close" id="post_popup-close">&times;</span>
            <div class="post_popup-image-container">
                <img id="post_popup-image" src="" alt="Imagen">
            </div>
            <div class="post_popup-text-container">
                <h2 id="post_popup-title">Titulo<!-- Aqui iria el titulo obteniendolo de la BD--></h2>
                <p id="post_popup-description">Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis ipsum labore quas facere enim optio expedita aperiam excepturi nesciunt maxime et possimus vitae, debitis quidem unde! Blanditiis ipsa minima vero?<!-- Aqui iria la descripcion obteniendolo de la BD--></p>
            </div>
        </div>
    </div>

    <script src="~/js/posts.js"></script>
</main>

